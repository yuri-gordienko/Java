# минимальное содержимое Докер файла
# под каждый сервис (контроллер, секюрити, эластик...) делается отдельный докер
# начинается с фром, после чего идет имя докер образа, хранятся они в докерХаб, типо как Мавен
FROM maven:3.8.3-openjdk-17

# можем описать любой процесс, который хотим делать посредством виртуальной машины Linux
# в этом файле пишем Шелл скрипты, которые выполняет Докер

# WORKDIR указываем рабочую дирректоию в которой и будем работать
# COPY копируем исходник джарника
# можно вместо COPY сделать Git Pull (для этого нужно настроить Git) + др.настройки и Докер вообще будет работать самостоятельно
# RUN линуксовые команды
WORKDIR /usr/src/app
COPY . /usr/src/app
RUN ls -la
RUN mvn clean package

# копируем содержимое из нашей локальной Докермашины (первая половина строки) в пространство Докермашины (docker_demo.jar),
# которая Линуксовая, которая будет жить в папке app
#COPY target/docker_demo.jar docker_demo.jar

# вызываем набор команд
ENTRYPOINT ["java", "-jar", "target/docker_demo.jar"]

# запускаем докер через терминал
#docker build -t docker-demo .

# можем фордварнуть на нужный нам порт (хост)
#docker run -p 9000:8080 docker-demo